<!DOCTYPE html>
<html><head title="Doc"><meta charset="UTF-8"/><link href="styles.css" rel="stylesheet"/></head><body><nav class="sidebar"><h3>Modules</h3><ul><li><li><a href="Canister.html">Canister</a></li></li><li><li><a href="Matchers.html">Matchers</a></li></li><li><li><a href="Suite.html">Suite</a></li></li><li><li><a href="Testable.html">Testable</a></li></li><li><li><a href="matchers/Hashmap.html">matchers/Hashmap</a></li></li></ul><h3>Declarations</h3><ul><li><li><a href="#type.Matcher">Matcher</a></li></li><li><li><a href="#value.assertThat">assertThat</a></li></li><li><li><a href="#value.attempt">attempt</a></li></li><li><li><a href="#value.contramap">contramap</a></li></li><li><li><a href="#class.Description">Description</a></li></li><li><li><a href="#value.anything">anything</a></li></li><li><li><a href="#value.describedAs">describedAs</a></li></li><li><li><a href="#value.equals">equals</a></li></li><li><li><a href="#value.greaterThan">greaterThan</a></li></li><li><li><a href="#value.greaterThanOrEqual">greaterThanOrEqual</a></li></li><li><li><a href="#value.lessThan">lessThan</a></li></li><li><li><a href="#value.lessThanOrEqual">lessThanOrEqual</a></li></li><li><li><a href="#value.inRange">inRange</a></li></li><li><li><a href="#value.allOf">allOf</a></li></li><li><li><a href="#value.anyOf">anyOf</a></li></li><li><li><a href="#value.not_">not_</a></li></li><li><li><a href="#value.array">array</a></li></li><li><li><a href="#value.isSome">isSome</a></li></li><li><li><a href="#value.isNull">isNull</a></li></li></ul></nav><div class="documentation"><h1>Matchers</h1><p>Composable assertions</p>
<p>This module contains functions for building and combining <code>Matcher</code>s that
can be used to build up assertions for testing.</p>
<pre class="motoko"><code class="motoko">import M &quot;mo:matchers/Matchers&quot;;
import T &quot;mo:matchers/Testable&quot;;

assertThat(5 + 5, M.equals(T.nat(10)));
assertThat(5 + 5, M.allOf&lt;Nat&gt;([M.greaterThan(8), M.lessThan(12)]));
assertThat([1, 2], M.array([M.equals(T.nat(1)), M.equals(T.nat(2))]));</code></pre><div class="declaration"><h4 class="type-declaration" id="type.Matcher"><span class="keyword">type </span><span class="type">Matcher</span>&lt;<span class="type">A</span>&gt; = { matches : (<span class="parameter">item</span> : <span class="type">A</span>) -&gt; <span class="type">Bool</span>; describeMismatch : (<span class="parameter">item</span> : <span class="type">A</span>, <span class="parameter">description</span> : <span class="type">Description</span>) -&gt; () }</h4><p><p>A <code>Matcher</code> is a composable way of building up assertions for tests</p>
</p></div><div class="declaration"><h4 class="function" id="value.assertThat"><code><span class="keyword">public func </span><span class="fnname">assertThat</span>&lt;<span class="type">A</span>&gt;(<span class="parameter">item</span> : <span class="type">A</span>, <span class="parameter">matcher</span> : <span class="type">Matcher</span>&lt;<span class="type">A</span>&gt;)</code></h4><p><p>Matches an <code>item</code> against a matcher and traps with an error if the
matcher fails. This is primarily for experimentation and one-offs. For
writing an actual test suite you probably want to use the functions in
<a href="Suite.html">Suite</a>.</p>
</p></div><div class="declaration"><h4 class="function" id="value.attempt"><code><span class="keyword">public func </span><span class="fnname">attempt</span>&lt;<span class="type">A</span>&gt;(<span class="parameter">item</span> : <span class="type">A</span>, <span class="parameter">matcher</span> : <span class="type">Matcher</span>&lt;<span class="type">A</span>&gt;) : {#success; #fail : <span class="type">Text</span>}</code></h4><p><p>Matches an <code>item</code> against a matcher and returns <code>null</code> in case the
match succeeds and <code>?errorMessage</code> if it fails.</p>
</p></div><div class="declaration"><h4 class="function" id="value.contramap"><code><span class="keyword">public func </span><span class="fnname">contramap</span>&lt;<span class="type">A</span>, <span class="type">B</span>&gt;(<span class="parameter">matcher</span> : <span class="type">Matcher</span>&lt;<span class="type">A</span>&gt;, <span class="parameter">f</span> : <span class="type">B</span> -&gt; <span class="type">A</span>) : <span class="type">Matcher</span>&lt;<span class="type">B</span>&gt;</code></h4><p><p>Turns a <code>Matcher</code> for <code>A</code>s into a <code>Matcher</code> for <code>B</code>s by using <code>f</code> as an adapter.</p>
</p></div><div class="declaration"><h4 class="class-declaration" id="class.Description"><span class="keyword">class </span><span class="classname">Description</span>()</h4><div class="declaration"><h4 class="function" id="value.appendText"><code><span class="keyword">public func </span><span class="fnname">appendText</span>(<span class="parameter">text</span> : <span class="type">Text</span>)</code></h4><p></p></div><div class="declaration"><h4 class="function" id="value.toText"><code><span class="keyword">public func </span><span class="fnname">toText</span>() : <span class="type">Text</span></code></h4><p></p></div><p><p><code>Matcher</code>s describe match failures by inserting them into a <code>Description</code>.</p>
</p></div><div class="declaration"><h4 class="function" id="value.anything"><code><span class="keyword">public func </span><span class="fnname">anything</span>&lt;<span class="type">A</span>&gt;() : <span class="type">Matcher</span>&lt;<span class="type">A</span>&gt;</code></h4><p><p>Always matches, useful if you donâ€™t care what the object under test is</p>
</p></div><div class="declaration"><h4 class="function" id="value.describedAs"><code><span class="keyword">public func </span><span class="fnname">describedAs</span>&lt;<span class="type">A</span>&gt;(<span class="parameter">msg</span> : <span class="type">Text</span>, <span class="parameter">matcher</span> : <span class="type">Matcher</span>&lt;<span class="type">A</span>&gt;) : <span class="type">Matcher</span>&lt;<span class="type">A</span>&gt;</code></h4><p><p>Decorator that allows adding a custom failure description</p>
</p></div><div class="declaration"><h4 class="function" id="value.equals"><code><span class="keyword">public func </span><span class="fnname">equals</span>&lt;<span class="type">A</span>&gt;(<span class="parameter">expected</span> : <span class="type">T.TestableItem</span>&lt;<span class="type">A</span>&gt;) : <span class="type">Matcher</span>&lt;<span class="type">A</span>&gt;</code></h4><p><p>Matches values equal to an expected <code>Testable</code></p>
</p></div><div class="declaration"><h4 class="function" id="value.greaterThan"><code><span class="keyword">public func </span><span class="fnname">greaterThan</span>&lt;<span class="type">A</span> &lt;: <span class="type">Int</span>&gt;(<span class="parameter">expected</span> : <span class="type">Int</span>) : <span class="type">Matcher</span>&lt;<span class="type">A</span>&gt;</code></h4><p><p>Matches values greater than <code>expected</code></p>
</p></div><div class="declaration"><h4 class="function" id="value.greaterThanOrEqual"><code><span class="keyword">public func </span><span class="fnname">greaterThanOrEqual</span>&lt;<span class="type">A</span> &lt;: <span class="type">Int</span>&gt;(<span class="parameter">expected</span> : <span class="type">Int</span>) : <span class="type">Matcher</span>&lt;<span class="type">A</span>&gt;</code></h4><p><p>Matches values greater than or equal to <code>expected</code></p>
</p></div><div class="declaration"><h4 class="function" id="value.lessThan"><code><span class="keyword">public func </span><span class="fnname">lessThan</span>&lt;<span class="type">A</span> &lt;: <span class="type">Int</span>&gt;(<span class="parameter">expected</span> : <span class="type">Int</span>) : <span class="type">Matcher</span>&lt;<span class="type">A</span>&gt;</code></h4><p><p>Matches values less than <code>expected</code></p>
</p></div><div class="declaration"><h4 class="function" id="value.lessThanOrEqual"><code><span class="keyword">public func </span><span class="fnname">lessThanOrEqual</span>&lt;<span class="type">A</span> &lt;: <span class="type">Int</span>&gt;(<span class="parameter">expected</span> : <span class="type">Int</span>) : <span class="type">Matcher</span>&lt;<span class="type">A</span>&gt;</code></h4><p><p>Matches values less than or equal to <code>expected</code></p>
</p></div><div class="declaration"><h4 class="function" id="value.inRange"><code><span class="keyword">public func </span><span class="fnname">inRange</span>&lt;<span class="type">A</span> &lt;: <span class="type">Int</span>&gt;(<span class="parameter">lower</span> : <span class="type">Int</span>, <span class="parameter">upper</span> : <span class="type">Int</span>) : <span class="type">Matcher</span>&lt;<span class="type">A</span>&gt;</code></h4><p><p>Matches values for being in inclusive range <code>[lower .. upper]</code></p>
</p></div><div class="declaration"><h4 class="function" id="value.allOf"><code><span class="keyword">public func </span><span class="fnname">allOf</span>&lt;<span class="type">A</span>&gt;(<span class="parameter">matchers</span> : [<span class="type">Matcher</span>&lt;<span class="type">A</span>&gt;]) : <span class="type">Matcher</span>&lt;<span class="type">A</span>&gt;</code></h4><p><p>Matches if all matchers match, short circuits (like <code>and</code>)</p>
</p></div><div class="declaration"><h4 class="function" id="value.anyOf"><code><span class="keyword">public func </span><span class="fnname">anyOf</span>&lt;<span class="type">A</span>&gt;(<span class="parameter">matchers</span> : [<span class="type">Matcher</span>&lt;<span class="type">A</span>&gt;]) : <span class="type">Matcher</span>&lt;<span class="type">A</span>&gt;</code></h4><p><p>Matches if any matchers match, short circuits (like <code>or</code>)</p>
</p></div><div class="declaration"><h4 class="function" id="value.not_"><code><span class="keyword">public func </span><span class="fnname">not_</span>&lt;<span class="type">A</span>&gt;(<span class="parameter">matcher</span> : <span class="type">Matcher</span>&lt;<span class="type">A</span>&gt;) : <span class="type">Matcher</span>&lt;<span class="type">A</span>&gt;</code></h4><p><p>Matches if the wrapped matcher doesnâ€™t match and vice versa</p>
</p></div><div class="declaration"><h4 class="function" id="value.array"><code><span class="keyword">public func </span><span class="fnname">array</span>&lt;<span class="type">A</span>&gt;(<span class="parameter">matchers</span> : [<span class="type">Matcher</span>&lt;<span class="type">A</span>&gt;]) : <span class="type">Matcher</span>&lt;[<span class="type">A</span>]&gt;</code></h4><p><p>Test an arrayâ€™s elements against an array of matchers</p>
</p></div><div class="declaration"><h4 class="function" id="value.isSome"><code><span class="keyword">public func </span><span class="fnname">isSome</span>&lt;<span class="type">A</span>&gt;() : <span class="type">Matcher</span>&lt;?<span class="type">A</span>&gt;</code></h4><p><p>Tests that a value is not-null</p>
</p></div><div class="declaration"><h4 class="function" id="value.isNull"><code><span class="keyword">public func </span><span class="fnname">isNull</span>&lt;<span class="type">A</span>&gt;() : <span class="type">Matcher</span>&lt;<span class="type">T.TestableItem</span>&lt;?<span class="type">A</span>&gt;&gt;</code></h4><p><p>Tests that a value is null</p>
</p></div></div></body></html>